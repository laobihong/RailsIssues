[{"url":"https://api.github.com/repos/rails/rails/issues/24109","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24109/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24109/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24109/events","html_url":"https://github.com/rails/rails/pull/24109","id":139368189,"number":24109,"title":"Raise IrreversibleOrderError when reversing an offset","user":{"login":"brchristian","id":2460418,"avatar_url":"https://avatars.githubusercontent.com/u/2460418?v=3","gravatar_id":"","url":"https://api.github.com/users/brchristian","html_url":"https://github.com/brchristian","followers_url":"https://api.github.com/users/brchristian/followers","following_url":"https://api.github.com/users/brchristian/following{/other_user}","gists_url":"https://api.github.com/users/brchristian/gists{/gist_id}","starred_url":"https://api.github.com/users/brchristian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brchristian/subscriptions","organizations_url":"https://api.github.com/users/brchristian/orgs","repos_url":"https://api.github.com/users/brchristian/repos","events_url":"https://api.github.com/users/brchristian/events{/privacy}","received_events_url":"https://api.github.com/users/brchristian/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"sgrif","id":1529387,"avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=3","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-03-08T19:18:37Z","updated_at":"2016-03-08T19:29:56Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24109","html_url":"https://github.com/rails/rails/pull/24109","diff_url":"https://github.com/rails/rails/pull/24109.diff","patch_url":"https://github.com/rails/rails/pull/24109.patch"},"body":"### Summary\r\n\r\nI noticed that in the `master` branch, the AR finder method `last` is designed to catch `ActiveRecord::IrreversibleOrderError` and fall back on `to_a.last` in that case. It occurred to me that this can be used to address some of the issues relating to the use of `last` with `offset`.\r\n\r\nI have documented a number of complex issues arising from the mixing of `offset` and `last`, for example in https://github.com/rails/rails/issues/23829.\r\n\r\nThis PR is designed to address this behavior by raising an `IrreversibleOrderError` when `reverse_order` is called on an AR Relation that has an offset.\r\n\r\n### Other Information\r\n\r\nThis PR involved changing the expectation for one current Rails test, from\r\n\r\n````ruby\r\nassert_equal devs[-3], Developer.offset(2).last\r\n````\r\n\r\nto\r\n\r\n````ruby\r\nassert_equal devs[-1], Developer.offset(2).last\r\n````\r\n\r\nThis change is in line with DHH's discussion about how `last` and `offset` should behave together in  https://github.com/rails/rails/pull/23598#issuecomment-189675440.\r\n\r\nBecause `Developer.offset(2).last` will raise an `ActiveSupport::Deprecation.warn`, I think users are reasonably well protected from this change affecting any application logic that relies on chaining these two finder methods together.\r\n\r\nI noticed that the interaction between offset and last is not fully covered in the documentation, so I am adding that as well."},{"url":"https://api.github.com/repos/rails/rails/issues/24107","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24107/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24107/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24107/events","html_url":"https://github.com/rails/rails/issues/24107","id":139292450,"number":24107,"title":"ActiveRecord-4.2.6 argument out of range in 'utc' in mysql2_adapter","user":{"login":"Dariusch","id":1800181,"avatar_url":"https://avatars.githubusercontent.com/u/1800181?v=3","gravatar_id":"","url":"https://api.github.com/users/Dariusch","html_url":"https://github.com/Dariusch","followers_url":"https://api.github.com/users/Dariusch/followers","following_url":"https://api.github.com/users/Dariusch/following{/other_user}","gists_url":"https://api.github.com/users/Dariusch/gists{/gist_id}","starred_url":"https://api.github.com/users/Dariusch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dariusch/subscriptions","organizations_url":"https://api.github.com/users/Dariusch/orgs","repos_url":"https://api.github.com/users/Dariusch/repos","events_url":"https://api.github.com/users/Dariusch/events{/privacy}","received_events_url":"https://api.github.com/users/Dariusch/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/MySQL","name":"MySQL","color":"fef2c0"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":1,"created_at":"2016-03-08T14:34:24Z","updated_at":"2016-03-08T17:17:47Z","closed_at":null,"body":"Hey guys,\r\n\r\nI just tried to upgrade my rails-app from rails 4.2.5.2 to 4.2.6 and got a new error while running my tests. Since I could not find a reported error here is my backtrace.\r\n\r\n```\r\nFailure/Error: - if @inbounds.blank?\r\n\r\nActionView::Template::Error:\r\n  argument out of range\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/mysql2_adapter.rb:236:in `utc'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/mysql2_adapter.rb:236:in `each'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/mysql2_adapter.rb:236:in `to_a'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/mysql2_adapter.rb:236:in `exec_query'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:356:in `select'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:32:in `select_all'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `block in select_all'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/abstract/query_cache.rb:83:in `cache_sql'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `select_all'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/connection_pool-2.2.0/lib/connection_pool.rb:144:in `block in method_missing'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/connection_pool-2.2.0/lib/connection_pool.rb:64:in `block (2 levels) in with'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/connection_pool-2.2.0/lib/connection_pool.rb:63:in `handle_interrupt'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/connection_pool-2.2.0/lib/connection_pool.rb:63:in `block in with'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/connection_pool-2.2.0/lib/connection_pool.rb:60:in `handle_interrupt'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/connection_pool-2.2.0/lib/connection_pool.rb:60:in `with'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/connection_pool-2.2.0/lib/connection_pool.rb:131:in `with'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/connection_pool-2.2.0/lib/connection_pool.rb:143:in `method_missing'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/relation/finder_methods.rb:401:in `limited_ids_for'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/relation/finder_methods.rb:387:in `apply_join_dependency'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/relation/finder_methods.rb:370:in `construct_relation_for_association_calculations'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/relation/calculations.rb:125:in `calculate'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/relation/calculations.rb:42:in `count'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/relation.rb:268:in `empty?'\r\n# ./app/views/sourcing/inbounds/index.html.haml:63:in `_app_views_sourcing_inbounds_index_html_haml__3180773629415134476_76437340'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/template.rb:145:in `block in render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/notifications.rb:166:in `instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/template.rb:333:in `instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/template.rb:143:in `render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/notifications.rb:164:in `block in instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/notifications.rb:164:in `instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/renderer/template_renderer.rb:52:in `render_template'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/renderer/template_renderer.rb:14:in `render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/renderer/renderer.rb:46:in `render_template'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/renderer/renderer.rb:27:in `render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/rendering.rb:100:in `_render_template'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/streaming.rb:217:in `_render_template'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/rendering.rb:83:in `render_to_body'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/rendering.rb:32:in `render_to_body'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/renderers.rb:37:in `render_to_body'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/abstract_controller/rendering.rb:25:in `render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/rendering.rb:16:in `render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/core_ext/benchmark.rb:12:in `ms'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/instrumentation.rb:44:in `block in render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/instrumentation.rb:43:in `render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/remotipart-1.2.1/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/implicit_render.rb:10:in `default_render'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/implicit_render.rb:5:in `send_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/abstract_controller/base.rb:198:in `process_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/rendering.rb:10:in `process_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/abstract_controller/callbacks.rb:20:in `block in process_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:117:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:117:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:505:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:505:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:92:in `__run_callbacks__'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/abstract_controller/callbacks.rb:19:in `process_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/rescue.rb:29:in `process_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/notifications.rb:164:in `block in instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/notifications.rb:164:in `instrument'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/instrumentation.rb:30:in `process_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/railties/controller_runtime.rb:18:in `process_action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/abstract_controller/base.rb:137:in `process'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionview-4.2.6/lib/action_view/rendering.rb:30:in `process'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal.rb:196:in `dispatch'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_controller/metal.rb:237:in `block in action'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/routing/route_set.rb:74:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/routing/route_set.rb:74:in `dispatch'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/routing/route_set.rb:43:in `serve'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/journey/router.rb:43:in `block in serve'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/journey/router.rb:30:in `each'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/journey/router.rb:30:in `serve'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/routing/route_set.rb:817:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/etag.rb:24:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/conditionalget.rb:25:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/head.rb:13:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/remotipart-1.2.1/lib/remotipart/middleware.rb:27:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/params_parser.rb:27:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/flash.rb:260:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/session/abstract/id.rb:225:in `context'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/session/abstract/id.rb:220:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/cookies.rb:560:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/query_cache.rb:36:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:88:in `__run_callbacks__'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:778:in `_run_call_callbacks'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/callbacks.rb:27:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/airbrake-5.1.0/lib/airbrake/rack/middleware.rb:22:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/rack/logger.rb:38:in `call_app'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/rack/logger.rb:20:in `block in call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/tagged_logging.rb:68:in `block in tagged'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/tagged_logging.rb:26:in `tagged'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/tagged_logging.rb:68:in `tagged'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/rack/logger.rb:20:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/request_store-1.3.0/lib/request_store/middleware.rb:9:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/request_id.rb:21:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/methodoverride.rb:22:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/runtime.rb:18:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.6/lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/lock.rb:17:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/actionpack-4.2.6/lib/action_dispatch/middleware/static.rb:120:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/sendfile.rb:113:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/engine.rb:518:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/application.rb:165:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/urlmap.rb:66:in `block in call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/urlmap.rb:50:in `each'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/urlmap.rb:50:in `call'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-test-0.6.3/lib/rack/mock_session.rb:30:in `request'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-test-0.6.3/lib/rack/test.rb:244:in `process_request'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/rack-test-0.6.3/lib/rack/test.rb:58:in `get'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/capybara-2.6.2/lib/capybara/rack_test/browser.rb:60:in `process'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/capybara-2.6.2/lib/capybara/rack_test/browser.rb:35:in `process_and_follow_redirects'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/capybara-2.6.2/lib/capybara/rack_test/browser.rb:21:in `visit'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/capybara-2.6.2/lib/capybara/rack_test/driver.rb:42:in `visit'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/capybara-2.6.2/lib/capybara/session.rb:232:in `visit'\r\n# /home/dariusch/.rvm/gems/ruby-2.2.3/gems/capybara-2.6.2/lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'\r\n# ./spec/features/sourcing/inbounds_controller_spec.rb:23:in `block (3 levels) in <top (required)>'\r\n# ------------------\r\n# --- Caused by: ---\r\n# ArgumentError:\r\n#   argument out of range\r\n#   /home/dariusch/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.6/lib/active_record/connection_adapters/mysql2_adapter.rb:236:in `utc'\r\n```\r\n\r\n### System configuration\r\n**Rails version**: 4.2.6\r\n**Ruby version**: 2.2.3\r\n**mysql2 gem version**: mysql2 (0.3.20)"},{"url":"https://api.github.com/repos/rails/rails/issues/24099","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24099/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24099/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24099/events","html_url":"https://github.com/rails/rails/pull/24099","id":139162350,"number":24099,"title":"Preserve readonly flag only for readonly association","user":{"login":"k0kubun","id":3138447,"avatar_url":"https://avatars.githubusercontent.com/u/3138447?v=3","gravatar_id":"","url":"https://api.github.com/users/k0kubun","html_url":"https://github.com/k0kubun","followers_url":"https://api.github.com/users/k0kubun/followers","following_url":"https://api.github.com/users/k0kubun/following{/other_user}","gists_url":"https://api.github.com/users/k0kubun/gists{/gist_id}","starred_url":"https://api.github.com/users/k0kubun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k0kubun/subscriptions","organizations_url":"https://api.github.com/users/k0kubun/orgs","repos_url":"https://api.github.com/users/k0kubun/repos","events_url":"https://api.github.com/users/k0kubun/events{/privacy}","received_events_url":"https://api.github.com/users/k0kubun/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"sgrif","id":1529387,"avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=3","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-03-08T02:50:35Z","updated_at":"2016-03-08T03:13:31Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24099","html_url":"https://github.com/rails/rails/pull/24099","diff_url":"https://github.com/rails/rails/pull/24099.diff","patch_url":"https://github.com/rails/rails/pull/24099.patch"},"body":"### Summary\r\nI fixed a bug in https://github.com/rails/rails/pull/18097. See  #24093 for detail.\r\nIn this patch, I made eager-loaded association readonly only when it was specified as readonly.\r\n\r\nFixes #24093"},{"url":"https://api.github.com/repos/rails/rails/issues/24094","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24094/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24094/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24094/events","html_url":"https://github.com/rails/rails/issues/24094","id":139015248,"number":24094,"title":"Actioncable deadlock resuming a connection with multiple channels","user":{"login":"eacaps","id":8252280,"avatar_url":"https://avatars.githubusercontent.com/u/8252280?v=3","gravatar_id":"","url":"https://api.github.com/users/eacaps","html_url":"https://github.com/eacaps","followers_url":"https://api.github.com/users/eacaps/followers","following_url":"https://api.github.com/users/eacaps/following{/other_user}","gists_url":"https://api.github.com/users/eacaps/gists{/gist_id}","starred_url":"https://api.github.com/users/eacaps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eacaps/subscriptions","organizations_url":"https://api.github.com/users/eacaps/orgs","repos_url":"https://api.github.com/users/eacaps/repos","events_url":"https://api.github.com/users/eacaps/events{/privacy}","received_events_url":"https://api.github.com/users/eacaps/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actioncable","name":"actioncable","color":"bfdadc"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":2,"created_at":"2016-03-07T15:58:11Z","updated_at":"2016-03-07T17:20:15Z","closed_at":null,"body":"I ran into an issue with my ActionCable enabled app where the server was locking up constantly using the current master branch from the rails repository. I was able to recreate the issue in my own fork of the ActionCable examples repo.\r\n\r\nI modified the ActionCable example to mount ActionCable at the '/ws' endpoint in the routes.rb file and I also created a second channel which the client subscribes to at the same time as the first: https://github.com/rails/actioncable-examples/compare/master...eacaps:2channel-rails5-master. \r\n\r\n### Steps to reproduce\r\n\r\n```\r\nOpen a terminal\r\n$ git clone https://github.com/eacaps/actioncable-examples.git\r\n$ cd actioncable-examples\r\n$ git checkout 2channel-rails5-master\r\n$ ./bin/setup\r\n$ ./bin/rails server\r\nOpen http://localhost:3000/ in a browser\r\nClick on a name to log in\r\n```\r\n\r\nAfter you click on a name to log in the server seems to lock up. Attempting to follow the navigation will result in hung requests. \r\n\r\n### Expected behavior\r\nI created a separate branch that uses `5.0.0beta3` called `2channel-beta3`. If you checkout that code and run the instructions above the server responds fine and your terminal output will look more like this:\r\n\r\n```\r\nStarted GET \"/ws\" for 127.0.0.1 at 2016-03-07 10:46:14 -0500\r\nStarted GET \"/ws/\" [WebSocket] for 127.0.0.1 at 2016-03-07 10:46:14 -0500\r\nSuccessfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)\r\n  User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 3], [\"LIMIT\", 1]]\r\n[ActionCable] [Funkmaster Flex] Registered connection (Z2lkOi8vYWN0aW9uY2FibGUtZXhhbXBsZXMvVXNlci8z)\r\ni subscribed[ActionCable] [Funkmaster Flex] CommentsChannel is transmitting the subscription confirmation\r\n\r\n[ActionCable] [Funkmaster Flex] OtherChannel transmitting {:data=>\"some data\"}\r\n[ActionCable] [Funkmaster Flex] OtherChannel is transmitting the subscription confirmation\r\n[ActionCable] [Funkmaster Flex] CommentsChannel#unfollow\r\n```\r\n\r\nEverything will work just fine from here.\r\n\r\n### Actual behavior\r\nWhen using the `2channel-rails5-master` branch your terminal will probably look something like this:\r\n\r\n```\r\nStarted GET \"/ws\" for 127.0.0.1 at 2016-03-07 10:36:09 -0500\r\nStarted GET \"/ws/\" [WebSocket] for 127.0.0.1 at 2016-03-07 10:36:09 -0500\r\nSuccessfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)\r\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\r\n[ActionCable] [The Notorious B.I.G.] Registered connection (Z2lkOi8vYWN0aW9uY2FibGUtZXhhbXBsZXMvVXNlci8x)\r\n```\r\n\r\nThe server is hung and there doesn't seem to be a way to recover.\r\n\r\n### System configuration\r\nUsing latest rails master branch from:\r\n`gem 'rails', git: 'https://github.com/rails/rails.git', branch: 'master'`\r\n\r\nRuby version info:\r\n```\r\nruby -v\r\nruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-darwin15]\r\n```\r\n\r\n### Additional info\r\nI also created `1channel-beta3` and `1channel-rails5-master` branches and they seem unaffected by this issue so in my limited research it seems that it has something to do with subscribing to multiple channels simultaneously. Like I show above, it also seems to work with rails `5.0.0beta3` unfortunately that release has an issue that prevents deployment on Heroku. That issue is fixed in the master branch unfortunately I ran into this separate issue. It can be temporarily remedied by creating a master channel that will subscribe to multiple separate channels but I don't think that is ideal going forward"},{"url":"https://api.github.com/repos/rails/rails/issues/24093","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24093/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24093/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24093/events","html_url":"https://github.com/rails/rails/issues/24093","id":138982123,"number":24093,"title":"Eager loaded belongs_to associations are always readonly","user":{"login":"bquorning","id":22333,"avatar_url":"https://avatars.githubusercontent.com/u/22333?v=3","gravatar_id":"","url":"https://api.github.com/users/bquorning","html_url":"https://github.com/bquorning","followers_url":"https://api.github.com/users/bquorning/followers","following_url":"https://api.github.com/users/bquorning/following{/other_user}","gists_url":"https://api.github.com/users/bquorning/gists{/gist_id}","starred_url":"https://api.github.com/users/bquorning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bquorning/subscriptions","organizations_url":"https://api.github.com/users/bquorning/orgs","repos_url":"https://api.github.com/users/bquorning/repos","events_url":"https://api.github.com/users/bquorning/events{/privacy}","received_events_url":"https://api.github.com/users/bquorning/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/attached%20PR","name":"attached PR","color":"006b75"},{"url":"https://api.github.com/repos/rails/rails/labels/With%20reproduction%20steps","name":"With reproduction steps","color":"009800"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":0,"created_at":"2016-03-07T13:49:08Z","updated_at":"2016-03-08T03:13:39Z","closed_at":null,"body":"### Steps to reproduce\r\n\r\nhttps://gist.github.com/bquorning/0ac738564824aa8ce57b\r\n\r\n### Expected behavior\r\n\r\nEager loaded belongs_to associations should not be readonly.\r\n\r\n### Actual behavior\r\n\r\nEager loaded belongs_to associations are always readonly.\r\n\r\n### System configuration\r\n**Rails version**: v5.0.0.beta1 and up, including latest master\r\n\r\n**Ruby version**: All.\r\n\r\n### Extra\r\n\r\nIt seems the issue was introduced in #18097."},{"url":"https://api.github.com/repos/rails/rails/issues/24092","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24092/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24092/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24092/events","html_url":"https://github.com/rails/rails/issues/24092","id":138970783,"number":24092,"title":"ActionCable having troubles parsing JSON","user":{"login":"nowakov","id":6850632,"avatar_url":"https://avatars.githubusercontent.com/u/6850632?v=3","gravatar_id":"","url":"https://api.github.com/users/nowakov","html_url":"https://github.com/nowakov","followers_url":"https://api.github.com/users/nowakov/followers","following_url":"https://api.github.com/users/nowakov/following{/other_user}","gists_url":"https://api.github.com/users/nowakov/gists{/gist_id}","starred_url":"https://api.github.com/users/nowakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nowakov/subscriptions","organizations_url":"https://api.github.com/users/nowakov/orgs","repos_url":"https://api.github.com/users/nowakov/repos","events_url":"https://api.github.com/users/nowakov/events{/privacy}","received_events_url":"https://api.github.com/users/nowakov/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actioncable","name":"actioncable","color":"bfdadc"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":2,"created_at":"2016-03-07T12:48:28Z","updated_at":"2016-03-07T15:13:39Z","closed_at":null,"body":"### Steps to reproduce\r\n\r\nI'm trying to connect with ActionCable, not using JS, but with websocket-client on raspi. So my simplified client-side example looks like this:\r\n```\r\nrequire 'websocket-client-simple'\r\nrequire 'eventmachine'\r\nrequire 'json'\r\n\r\nsubscribe_cmd = {\r\n  command: 'subscribe',\r\n  identifier: { channel: 'PrintersChannel' }\r\n}\r\nEM.run {\r\n  url = 'ws://localhost:28080/cable'\r\n  ws = WebSocket::Client::Simple.connect(url, headers: { printer_token: 'test-printer' })\r\n\r\n  ws.on :open do |event|\r\n    ws.send(JSON.generate(subscribe_cmd))\r\n  end\r\n}\r\n```\r\nand my connection.rb:\r\n```\r\nmodule ApplicationCable\r\n  class Connection < ActionCable::Connection::Base\r\n    identified_by :printer\r\n\r\n    def connect\r\n      self.printer = fetch_printer\r\n    end\r\n\r\n    protected\r\n\r\n    def fetch_printer\r\n      Printer.find_by_token(env['HTTP_PRINTER_TOKEN']) || reject_unauthorized_connection\r\n    end\r\n\r\n  end\r\nend\r\n```\r\n\r\n### Expected behavior\r\nIf I use this hardcoded json string: `'{\"command\":\"subscribe\",\"identifier\":\"{\\\"channel\\\":\\\"PrintersChannel\\\"}\"}'` it just works fine and I'd expect the same from generated JSON's\r\n\r\n### Actual behavior\r\nbut instead I get this:\r\n```\r\nRegistered connection (Z2lkOi8vc2tyaW1hcmtldC9QcmludGVyLzE)\r\nCould not execute command from {\"command\"=>\"subscribe\", \"identifier\"=>{\"channel\"=>\"PrintersChannel\"}}) [TypeError - no implicit conversion of Hash into String]\r\n```\r\nThere's actually not much information about non-JS actioncable connections so maybe I'm just doing it wrong? If that's the case what is the best way to communicate with actioncable from external devices? I'm planning to use it with python script on raspi and iOS devices.\r\n\r\n### System configuration\r\n**Rails version**: 5.0.0.beta3\r\n\r\n**Ruby version**: 2.3.0\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24088","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24088/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24088/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24088/events","html_url":"https://github.com/rails/rails/pull/24088","id":138842216,"number":24088,"title":"Initialize `column.table_name` immediately for `column.serial?` correctly working","user":{"login":"kamipo","id":12642,"avatar_url":"https://avatars.githubusercontent.com/u/12642?v=3","gravatar_id":"","url":"https://api.github.com/users/kamipo","html_url":"https://github.com/kamipo","followers_url":"https://api.github.com/users/kamipo/followers","following_url":"https://api.github.com/users/kamipo/following{/other_user}","gists_url":"https://api.github.com/users/kamipo/gists{/gist_id}","starred_url":"https://api.github.com/users/kamipo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamipo/subscriptions","organizations_url":"https://api.github.com/users/kamipo/orgs","repos_url":"https://api.github.com/users/kamipo/repos","events_url":"https://api.github.com/users/kamipo/events{/privacy}","received_events_url":"https://api.github.com/users/kamipo/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-03-06T21:48:54Z","updated_at":"2016-03-06T22:56:53Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24088","html_url":"https://github.com/rails/rails/pull/24088","diff_url":"https://github.com/rails/rails/pull/24088.diff","patch_url":"https://github.com/rails/rails/pull/24088.patch"},"body":"Currently the results of `column.serial?` is not correct. For\r\n`column.serial?` correctly working, initialize `column.table_name`\r\nimmediately."},{"url":"https://api.github.com/repos/rails/rails/issues/24087","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24087/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24087/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24087/events","html_url":"https://github.com/rails/rails/pull/24087","id":138841440,"number":24087,"title":"Dump `bigint` instead of `integer` with `limit: 8` for schema dumper","user":{"login":"kamipo","id":12642,"avatar_url":"https://avatars.githubusercontent.com/u/12642?v=3","gravatar_id":"","url":"https://api.github.com/users/kamipo","html_url":"https://github.com/kamipo","followers_url":"https://api.github.com/users/kamipo/followers","following_url":"https://api.github.com/users/kamipo/following{/other_user}","gists_url":"https://api.github.com/users/kamipo/gists{/gist_id}","starred_url":"https://api.github.com/users/kamipo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamipo/subscriptions","organizations_url":"https://api.github.com/users/kamipo/orgs","repos_url":"https://api.github.com/users/kamipo/repos","events_url":"https://api.github.com/users/kamipo/events{/privacy}","received_events_url":"https://api.github.com/users/kamipo/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"senny","id":5402,"avatar_url":"https://avatars.githubusercontent.com/u/5402?v=3","gravatar_id":"","url":"https://api.github.com/users/senny","html_url":"https://github.com/senny","followers_url":"https://api.github.com/users/senny/followers","following_url":"https://api.github.com/users/senny/following{/other_user}","gists_url":"https://api.github.com/users/senny/gists{/gist_id}","starred_url":"https://api.github.com/users/senny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/senny/subscriptions","organizations_url":"https://api.github.com/users/senny/orgs","repos_url":"https://api.github.com/users/senny/repos","events_url":"https://api.github.com/users/senny/events{/privacy}","received_events_url":"https://api.github.com/users/senny/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-03-06T21:37:39Z","updated_at":"2016-03-06T22:56:38Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24087","html_url":"https://github.com/rails/rails/pull/24087","diff_url":"https://github.com/rails/rails/pull/24087.diff","patch_url":"https://github.com/rails/rails/pull/24087.patch"},"body":"Before:\r\n\r\n```ruby\r\ncreate_table \"big_numbers\", force: :cascade do |t|\r\n  t.integer \"bigint_column\", limit: 8\r\nend\r\n```\r\n\r\nAfter:\r\n\r\n```ruby\r\ncreate_table \"big_numbers\", force: :cascade do |t|\r\n  t.bigint \"bigint_column\"\r\nend\r\n```"},{"url":"https://api.github.com/repos/rails/rails/issues/24084","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24084/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24084/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24084/events","html_url":"https://github.com/rails/rails/issues/24084","id":138755949,"number":24084,"title":"Getting started guide issue : Windows/coffee-script-source >=1.9.0 incompatibility","user":{"login":"tdutreui","id":2420358,"avatar_url":"https://avatars.githubusercontent.com/u/2420358?v=3","gravatar_id":"","url":"https://api.github.com/users/tdutreui","html_url":"https://github.com/tdutreui","followers_url":"https://api.github.com/users/tdutreui/followers","following_url":"https://api.github.com/users/tdutreui/following{/other_user}","gists_url":"https://api.github.com/users/tdutreui/gists{/gist_id}","starred_url":"https://api.github.com/users/tdutreui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tdutreui/subscriptions","organizations_url":"https://api.github.com/users/tdutreui/orgs","repos_url":"https://api.github.com/users/tdutreui/repos","events_url":"https://api.github.com/users/tdutreui/events{/privacy}","received_events_url":"https://api.github.com/users/tdutreui/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":3,"created_at":"2016-03-06T05:09:50Z","updated_at":"2016-03-06T21:32:46Z","closed_at":null,"body":"### Steps to reproduce\r\n\r\nDo all steps in http://guides.rubyonrails.org/getting_started.html until section 4.3\r\nAt the end of 4.3, an error is shown instead of the expected 'Hello, Rails!'\r\n\r\n\r\n### Expected behavior\r\n'Hello, Rails!' is shown, like described in the 4.3 section\r\n\r\n### Actual behavior\r\nerror:\r\n\r\nTypeError: Object doesn't support this property or method\r\n  (in c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/turbolinks-2.5.3/lib/assets/javascripts/turbolinks.js.coffee)\r\n\r\n### System configuration\r\n**Rails version**:\r\nRails 4.2.5.2\r\n**Ruby version**:\r\nruby 2.2.4p230 (2015-12-16 revision 53155) [i386-mingw32]\r\n\r\n###Proposed solution\r\nPut a warning in the guide to follow these steps if using Windows:\r\nput in Gemfile:\r\ngem 'coffee-script-source', '1.8.0'\r\n\r\nthen run:\r\nbundle update coffee-script-source"},{"url":"https://api.github.com/repos/rails/rails/issues/24083","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24083/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24083/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24083/events","html_url":"https://github.com/rails/rails/pull/24083","id":138754822,"number":24083,"title":"Do not duplicate join records for has_and_belong_to_many associations","user":{"login":"meinac","id":1840945,"avatar_url":"https://avatars.githubusercontent.com/u/1840945?v=3","gravatar_id":"","url":"https://api.github.com/users/meinac","html_url":"https://github.com/meinac","followers_url":"https://api.github.com/users/meinac/followers","following_url":"https://api.github.com/users/meinac/following{/other_user}","gists_url":"https://api.github.com/users/meinac/gists{/gist_id}","starred_url":"https://api.github.com/users/meinac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meinac/subscriptions","organizations_url":"https://api.github.com/users/meinac/orgs","repos_url":"https://api.github.com/users/meinac/repos","events_url":"https://api.github.com/users/meinac/events{/privacy}","received_events_url":"https://api.github.com/users/meinac/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"kaspth","id":350807,"avatar_url":"https://avatars.githubusercontent.com/u/350807?v=3","gravatar_id":"","url":"https://api.github.com/users/kaspth","html_url":"https://github.com/kaspth","followers_url":"https://api.github.com/users/kaspth/followers","following_url":"https://api.github.com/users/kaspth/following{/other_user}","gists_url":"https://api.github.com/users/kaspth/gists{/gist_id}","starred_url":"https://api.github.com/users/kaspth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaspth/subscriptions","organizations_url":"https://api.github.com/users/kaspth/orgs","repos_url":"https://api.github.com/users/kaspth/repos","events_url":"https://api.github.com/users/kaspth/events{/privacy}","received_events_url":"https://api.github.com/users/kaspth/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-03-06T04:47:35Z","updated_at":"2016-03-06T07:03:55Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24083","html_url":"https://github.com/rails/rails/pull/24083","diff_url":"https://github.com/rails/rails/pull/24083.diff","patch_url":"https://github.com/rails/rails/pull/24083.patch"},"body":"Detailed information about current wrong behaviour is described in #24032 with reproduction script. Briefly Active Record creates unnecessary join records for has_and_belongs_to_many associations in some cases depending on the order of `ActiveRecord::Associations` class methods(has_one, has_many, etc.). The purpose of this pull request is fixing this issue.\r\n\r\nCloses #24032"},{"url":"https://api.github.com/repos/rails/rails/issues/24078","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24078/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24078/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24078/events","html_url":"https://github.com/rails/rails/pull/24078","id":138734990,"number":24078,"title":"Simply use `select_value` in `show_variable`","user":{"login":"kamipo","id":12642,"avatar_url":"https://avatars.githubusercontent.com/u/12642?v=3","gravatar_id":"","url":"https://api.github.com/users/kamipo","html_url":"https://github.com/kamipo","followers_url":"https://api.github.com/users/kamipo/followers","following_url":"https://api.github.com/users/kamipo/following{/other_user}","gists_url":"https://api.github.com/users/kamipo/gists{/gist_id}","starred_url":"https://api.github.com/users/kamipo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamipo/subscriptions","organizations_url":"https://api.github.com/users/kamipo/orgs","repos_url":"https://api.github.com/users/kamipo/repos","events_url":"https://api.github.com/users/kamipo/events{/privacy}","received_events_url":"https://api.github.com/users/kamipo/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"schneems","id":59744,"avatar_url":"https://avatars.githubusercontent.com/u/59744?v=3","gravatar_id":"","url":"https://api.github.com/users/schneems","html_url":"https://github.com/schneems","followers_url":"https://api.github.com/users/schneems/followers","following_url":"https://api.github.com/users/schneems/following{/other_user}","gists_url":"https://api.github.com/users/schneems/gists{/gist_id}","starred_url":"https://api.github.com/users/schneems/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schneems/subscriptions","organizations_url":"https://api.github.com/users/schneems/orgs","repos_url":"https://api.github.com/users/schneems/repos","events_url":"https://api.github.com/users/schneems/events{/privacy}","received_events_url":"https://api.github.com/users/schneems/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-03-05T23:49:37Z","updated_at":"2016-03-07T07:53:47Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24078","html_url":"https://github.com/rails/rails/pull/24078","diff_url":"https://github.com/rails/rails/pull/24078.diff","patch_url":"https://github.com/rails/rails/pull/24078.patch"},"body":"`SELECT @@name` statement returns only single row or `StatementInvalid`.\r\n\r\n```\r\nroot@localhost [activerecord_unittest] > SELECT @@version;\r\n+-----------+\r\n| @@version |\r\n+-----------+\r\n| 5.7.9-log |\r\n+-----------+\r\n1 row in set (0.00 sec)\r\n\r\nroot@localhost [activerecord_unittest] > SELECT @@unknown_variable;\r\nERROR 1193 (HY000): Unknown system variable 'missing_variable'\r\n```"},{"url":"https://api.github.com/repos/rails/rails/issues/24071","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24071/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24071/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24071/events","html_url":"https://github.com/rails/rails/pull/24071","id":138647388,"number":24071,"title":"Added some useful configuration options into configuring.md [ci skip]","user":{"login":"meinac","id":1840945,"avatar_url":"https://avatars.githubusercontent.com/u/1840945?v=3","gravatar_id":"","url":"https://api.github.com/users/meinac","html_url":"https://github.com/meinac","followers_url":"https://api.github.com/users/meinac/followers","following_url":"https://api.github.com/users/meinac/following{/other_user}","gists_url":"https://api.github.com/users/meinac/gists{/gist_id}","starred_url":"https://api.github.com/users/meinac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meinac/subscriptions","organizations_url":"https://api.github.com/users/meinac/orgs","repos_url":"https://api.github.com/users/meinac/repos","events_url":"https://api.github.com/users/meinac/events{/privacy}","received_events_url":"https://api.github.com/users/meinac/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":{"login":"chancancode","id":55829,"avatar_url":"https://avatars.githubusercontent.com/u/55829?v=3","gravatar_id":"","url":"https://api.github.com/users/chancancode","html_url":"https://github.com/chancancode","followers_url":"https://api.github.com/users/chancancode/followers","following_url":"https://api.github.com/users/chancancode/following{/other_user}","gists_url":"https://api.github.com/users/chancancode/gists{/gist_id}","starred_url":"https://api.github.com/users/chancancode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chancancode/subscriptions","organizations_url":"https://api.github.com/users/chancancode/orgs","repos_url":"https://api.github.com/users/chancancode/repos","events_url":"https://api.github.com/users/chancancode/events{/privacy}","received_events_url":"https://api.github.com/users/chancancode/received_events","type":"User","site_admin":false},"milestone":null,"comments":3,"created_at":"2016-03-05T05:14:19Z","updated_at":"2016-03-05T20:40:46Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24071","html_url":"https://github.com/rails/rails/pull/24071","diff_url":"https://github.com/rails/rails/pull/24071.diff","patch_url":"https://github.com/rails/rails/pull/24071.patch"},"body":"This pr consist of some additions into `Configuring Rails Applications` doc.\r\n+ Added information about inserting middlewares with indexes. I think this information is useful. For example If you want to use `Rack::Cors` gem for handling preflight requests adding it on the top of the middleware stack would be good choice. The easiest way to do is providing index to `insert_before`. Also we can use indexes for `insert_after` but the behaviour is not same with `insert_before` and I think this is not the right place to give full information about all configuration options.\r\n+ The configuration for I18n fallbacks is important for production environment. Especially using different fallbacks for different locales, if you are working with multilingual project."},{"url":"https://api.github.com/repos/rails/rails/issues/24066","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24066/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24066/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24066/events","html_url":"https://github.com/rails/rails/pull/24066","id":138605070,"number":24066,"title":"Add update_gemfile in rails:update Rake task","user":{"login":"dewski","id":79995,"avatar_url":"https://avatars.githubusercontent.com/u/79995?v=3","gravatar_id":"","url":"https://api.github.com/users/dewski","html_url":"https://github.com/dewski","followers_url":"https://api.github.com/users/dewski/followers","following_url":"https://api.github.com/users/dewski/following{/other_user}","gists_url":"https://api.github.com/users/dewski/gists{/gist_id}","starred_url":"https://api.github.com/users/dewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dewski/subscriptions","organizations_url":"https://api.github.com/users/dewski/orgs","repos_url":"https://api.github.com/users/dewski/repos","events_url":"https://api.github.com/users/dewski/events{/privacy}","received_events_url":"https://api.github.com/users/dewski/received_events","type":"User","site_admin":true},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/railties","name":"railties","color":"8BE06E"}],"state":"open","locked":false,"assignee":{"login":"arthurnn","id":833383,"avatar_url":"https://avatars.githubusercontent.com/u/833383?v=3","gravatar_id":"","url":"https://api.github.com/users/arthurnn","html_url":"https://github.com/arthurnn","followers_url":"https://api.github.com/users/arthurnn/followers","following_url":"https://api.github.com/users/arthurnn/following{/other_user}","gists_url":"https://api.github.com/users/arthurnn/gists{/gist_id}","starred_url":"https://api.github.com/users/arthurnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arthurnn/subscriptions","organizations_url":"https://api.github.com/users/arthurnn/orgs","repos_url":"https://api.github.com/users/arthurnn/repos","events_url":"https://api.github.com/users/arthurnn/events{/privacy}","received_events_url":"https://api.github.com/users/arthurnn/received_events","type":"User","site_admin":true},"milestone":{"url":"https://api.github.com/repos/rails/rails/milestones/47","html_url":"https://github.com/rails/rails/milestones/5.0.0","labels_url":"https://api.github.com/repos/rails/rails/milestones/47/labels","id":1467326,"number":47,"title":"5.0.0","description":"","creator":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"open_issues":16,"closed_issues":393,"state":"open","created_at":"2015-12-18T21:17:59Z","updated_at":"2016-03-07T08:14:21Z","due_on":null,"closed_at":null},"comments":7,"created_at":"2016-03-04T22:28:42Z","updated_at":"2016-03-07T21:19:31Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24066","html_url":"https://github.com/rails/rails/pull/24066","diff_url":"https://github.com/rails/rails/pull/24066.diff","patch_url":"https://github.com/rails/rails/pull/24066.patch"},"body":"Rails 5 introduces a new `ActiveSupport::EventedFileUpdateChecker` class which is conditionally injected into existing Rails application configuration files from the `bin/rake app:update` task. During this upgrade process Rails checks to see if the `listen` library is required. If `listen` is required `ActiveSupport::EventedFileUpdateChecker` is added to the bottom of `config/environments/development.rb` as:\r\n\r\n```ruby\r\nconfig.file_watcher = ActiveSupport::EventedFileUpdateChecker\r\n```\r\n\r\nThe check for the `listen` library requirement is performed on a fresh installation of a Rails 5 project which is why this is a non-issue for fresh Rails projects using beta 3. It is expected that if the `listen` library is required the `listen` and `spring-watcher-listen` gems are present in the `:development` group of the Gemfile. That same requirement check is not happening during the upgrade process for the Gemfile which produces the error raised in #24063.\r\n\r\nThis change to the `app:upgrade` task upgrades the projects existing Gemfile to include the new development dependencies introduced by Rails 5.\r\n\r\n/cc @sadinie @maclover7 @rafaelfranca @fxn"},{"url":"https://api.github.com/repos/rails/rails/issues/24063","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24063/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24063/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24063/events","html_url":"https://github.com/rails/rails/issues/24063","id":138584758,"number":24063,"title":"Rails 5.0.0beta3 cannot load such file -- listen","user":{"login":"sadinie","id":17655353,"avatar_url":"https://avatars.githubusercontent.com/u/17655353?v=3","gravatar_id":"","url":"https://api.github.com/users/sadinie","html_url":"https://github.com/sadinie","followers_url":"https://api.github.com/users/sadinie/followers","following_url":"https://api.github.com/users/sadinie/following{/other_user}","gists_url":"https://api.github.com/users/sadinie/gists{/gist_id}","starred_url":"https://api.github.com/users/sadinie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sadinie/subscriptions","organizations_url":"https://api.github.com/users/sadinie/orgs","repos_url":"https://api.github.com/users/sadinie/repos","events_url":"https://api.github.com/users/sadinie/events{/privacy}","received_events_url":"https://api.github.com/users/sadinie/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activesupport","name":"activesupport","color":"FC9300"},{"url":"https://api.github.com/repos/rails/rails/labels/attached%20PR","name":"attached PR","color":"006b75"}],"state":"open","locked":false,"assignee":null,"milestone":{"url":"https://api.github.com/repos/rails/rails/milestones/47","html_url":"https://github.com/rails/rails/milestones/5.0.0","labels_url":"https://api.github.com/repos/rails/rails/milestones/47/labels","id":1467326,"number":47,"title":"5.0.0","description":"","creator":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"open_issues":16,"closed_issues":393,"state":"open","created_at":"2015-12-18T21:17:59Z","updated_at":"2016-03-07T08:14:21Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2016-03-04T20:58:47Z","updated_at":"2016-03-08T20:42:06Z","closed_at":null,"body":"### Steps to reproduce\r\nUpdated gemfile to beta3\r\nran bundle update rails\r\nran rake rails:update\r\nstarted my app in dev mode\r\n\r\n\r\n### Expected behavior\r\nRails should start up\r\n\r\n### Actual behavior\r\nCrashed\r\n/home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/dependencies.rb:302:in `require': cannot load such file -- listen (LoadError)\r\n\r\n### System configuration\r\n**Rails version**: 5.0.0.beta3\r\n\r\n**Ruby version**: ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]\r\n\r\nI commented out the block in activesupport-5.0.0.beta3/lib/active_support/evented_file_update_checker.rb:24 just so it runs, but seems to be causing the server to need\r\nto be restarted after any change, like in controllers or models.\r\n\r\nFull stack trace\r\n\r\n/home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/dependencies.rb:302:in `require': cannot load such file -- listen (LoadError)\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/dependencies.rb:302:in `block in require'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/dependencies.rb:268:in `load_dependency'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/dependencies.rb:302:in `require'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/evented_file_update_checker.rb:24:in `block in initialize'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/core_ext/kernel/reporting.rb:13:in `block in silence_warnings'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/core_ext/kernel/reporting.rb:26:in `with_warnings'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/core_ext/kernel/reporting.rb:13:in `silence_warnings'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/evented_file_update_checker.rb:24:in `initialize'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/i18n_railtie.rb:59:in `new'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/i18n_railtie.rb:59:in `initialize_i18n'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/i18n_railtie.rb:15:in `block in <class:Railtie>'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/lazy_load_hooks.rb:45:in `block in run_load_hooks'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/lazy_load_hooks.rb:44:in `each'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/lazy_load_hooks.rb:44:in `run_load_hooks'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/application/finisher.rb:62:in `block in <module:Finisher>'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/initializable.rb:30:in `instance_exec'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/initializable.rb:30:in `run'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/initializable.rb:55:in `block in run_initializers'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/2.3.0/tsort.rb:228:in `block in tsort_each'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/2.3.0/tsort.rb:347:in `each'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/2.3.0/tsort.rb:347:in `call'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/2.3.0/tsort.rb:226:in `tsort_each'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/2.3.0/tsort.rb:205:in `tsort_each'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/initializable.rb:54:in `run_initializers'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/application.rb:350:in `initialize!'\r\n\tfrom /home/sadinie/projects/jade-projects/jade/config/environment.rb:5:in `<top (required)>'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/dependencies.rb:302:in `require'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/dependencies.rb:302:in `block in require'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/dependencies.rb:268:in `load_dependency'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/activesupport-5.0.0.beta3/lib/active_support/dependencies.rb:302:in `require'\r\n\tfrom /home/sadinie/projects/jade-projects/jade/config.ru:3:in `block in <main>'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/rack-2.0.0.alpha/lib/rack/builder.rb:55:in `instance_eval'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/rack-2.0.0.alpha/lib/rack/builder.rb:55:in `initialize'\r\n\tfrom /home/sadinie/projects/jade-projects/jade/config.ru:in `new'\r\n\tfrom /home/sadinie/projects/jade-projects/jade/config.ru:in `<main>'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/rack-2.0.0.alpha/lib/rack/builder.rb:49:in `eval'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/rack-2.0.0.alpha/lib/rack/builder.rb:49:in `new_from_string'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/rack-2.0.0.alpha/lib/rack/builder.rb:40:in `parse_file'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/rack-2.0.0.alpha/lib/rack/server.rb:318:in `build_app_and_options_from_config'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/rack-2.0.0.alpha/lib/rack/server.rb:218:in `app'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/commands/server.rb:58:in `app'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/rack-2.0.0.alpha/lib/rack/server.rb:353:in `wrapped_app'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/commands/server.rb:136:in `log_to_stdout'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/commands/server.rb:76:in `start'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/commands/commands_tasks.rb:90:in `block in server'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/commands/commands_tasks.rb:85:in `tap'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/commands/commands_tasks.rb:85:in `server'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/command.rb:20:in `run'\r\n\tfrom /home/sadinie/dev/ruby/lib64/ruby/gems/2.3.0/gems/railties-5.0.0.beta3/lib/rails/commands.rb:18:in `<top (required)>'\r\n\tfrom /home/sadinie/projects/jade-projects/jade/bin/rails:4:in `require'\r\n\tfrom /home/sadinie/projects/jade-projects/jade/bin/rails:4:in `<top (required)>'\r\n\tfrom -e:1:in `load'\r\n\tfrom -e:1:in `<main>'\r\n\r\nProcess finished with exit code 1\r\n\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24062","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24062/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24062/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24062/events","html_url":"https://github.com/rails/rails/pull/24062","id":138580843,"number":24062,"title":"Remove redundant regexp escapes in generators","user":{"login":"resure","id":168296,"avatar_url":"https://avatars.githubusercontent.com/u/168296?v=3","gravatar_id":"","url":"https://api.github.com/users/resure","html_url":"https://github.com/resure","followers_url":"https://api.github.com/users/resure/followers","following_url":"https://api.github.com/users/resure/following{/other_user}","gists_url":"https://api.github.com/users/resure/gists{/gist_id}","starred_url":"https://api.github.com/users/resure/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/resure/subscriptions","organizations_url":"https://api.github.com/users/resure/orgs","repos_url":"https://api.github.com/users/resure/repos","events_url":"https://api.github.com/users/resure/events{/privacy}","received_events_url":"https://api.github.com/users/resure/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/railties","name":"railties","color":"8BE06E"}],"state":"open","locked":false,"assignee":{"login":"eileencodes","id":1080678,"avatar_url":"https://avatars.githubusercontent.com/u/1080678?v=3","gravatar_id":"","url":"https://api.github.com/users/eileencodes","html_url":"https://github.com/eileencodes","followers_url":"https://api.github.com/users/eileencodes/followers","following_url":"https://api.github.com/users/eileencodes/following{/other_user}","gists_url":"https://api.github.com/users/eileencodes/gists{/gist_id}","starred_url":"https://api.github.com/users/eileencodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eileencodes/subscriptions","organizations_url":"https://api.github.com/users/eileencodes/orgs","repos_url":"https://api.github.com/users/eileencodes/repos","events_url":"https://api.github.com/users/eileencodes/events{/privacy}","received_events_url":"https://api.github.com/users/eileencodes/received_events","type":"User","site_admin":false},"milestone":null,"comments":3,"created_at":"2016-03-04T20:38:03Z","updated_at":"2016-03-08T12:59:31Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24062","html_url":"https://github.com/rails/rails/pull/24062","diff_url":"https://github.com/rails/rails/pull/24062.diff","patch_url":"https://github.com/rails/rails/pull/24062.patch"},"body":"### Summary\r\n\r\nRemove some redundant regexp escapes in generators, since `_` is not a special character and can be used directly."},{"url":"https://api.github.com/repos/rails/rails/issues/24060","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24060/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24060/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24060/events","html_url":"https://github.com/rails/rails/pull/24060","id":138534529,"number":24060,"title":"Fix ActiveRecord's 'first' method with 'limit'. Fixes #23979","user":{"login":"mechanicles","id":77895,"avatar_url":"https://avatars.githubusercontent.com/u/77895?v=3","gravatar_id":"","url":"https://api.github.com/users/mechanicles","html_url":"https://github.com/mechanicles","followers_url":"https://api.github.com/users/mechanicles/followers","following_url":"https://api.github.com/users/mechanicles/following{/other_user}","gists_url":"https://api.github.com/users/mechanicles/gists{/gist_id}","starred_url":"https://api.github.com/users/mechanicles/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mechanicles/subscriptions","organizations_url":"https://api.github.com/users/mechanicles/orgs","repos_url":"https://api.github.com/users/mechanicles/repos","events_url":"https://api.github.com/users/mechanicles/events{/privacy}","received_events_url":"https://api.github.com/users/mechanicles/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"eileencodes","id":1080678,"avatar_url":"https://avatars.githubusercontent.com/u/1080678?v=3","gravatar_id":"","url":"https://api.github.com/users/eileencodes","html_url":"https://github.com/eileencodes","followers_url":"https://api.github.com/users/eileencodes/followers","following_url":"https://api.github.com/users/eileencodes/following{/other_user}","gists_url":"https://api.github.com/users/eileencodes/gists{/gist_id}","starred_url":"https://api.github.com/users/eileencodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eileencodes/subscriptions","organizations_url":"https://api.github.com/users/eileencodes/orgs","repos_url":"https://api.github.com/users/eileencodes/repos","events_url":"https://api.github.com/users/eileencodes/events{/privacy}","received_events_url":"https://api.github.com/users/eileencodes/received_events","type":"User","site_admin":false},"milestone":null,"comments":4,"created_at":"2016-03-04T17:32:05Z","updated_at":"2016-03-06T07:10:25Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24060","html_url":"https://github.com/rails/rails/pull/24060","diff_url":"https://github.com/rails/rails/pull/24060.diff","patch_url":"https://github.com/rails/rails/pull/24060.patch"},"body":"- When 'first' method gets used with 'limit', it was overriding limit value.\r\n- Added a new private method 'find_first' which helps to fetch the correct record(s).\r\n- Added tests for the same.\r\n- Fixes #23979"},{"url":"https://api.github.com/repos/rails/rails/issues/24059","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24059/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24059/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24059/events","html_url":"https://github.com/rails/rails/pull/24059","id":138517014,"number":24059,"title":"ensuring that exceptions arent raised if a user send empty parameters on an nested attributes parameter","user":{"login":"guilherme","id":19025,"avatar_url":"https://avatars.githubusercontent.com/u/19025?v=3","gravatar_id":"","url":"https://api.github.com/users/guilherme","html_url":"https://github.com/guilherme","followers_url":"https://api.github.com/users/guilherme/followers","following_url":"https://api.github.com/users/guilherme/following{/other_user}","gists_url":"https://api.github.com/users/guilherme/gists{/gist_id}","starred_url":"https://api.github.com/users/guilherme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guilherme/subscriptions","organizations_url":"https://api.github.com/users/guilherme/orgs","repos_url":"https://api.github.com/users/guilherme/repos","events_url":"https://api.github.com/users/guilherme/events{/privacy}","received_events_url":"https://api.github.com/users/guilherme/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"schneems","id":59744,"avatar_url":"https://avatars.githubusercontent.com/u/59744?v=3","gravatar_id":"","url":"https://api.github.com/users/schneems","html_url":"https://github.com/schneems","followers_url":"https://api.github.com/users/schneems/followers","following_url":"https://api.github.com/users/schneems/following{/other_user}","gists_url":"https://api.github.com/users/schneems/gists{/gist_id}","starred_url":"https://api.github.com/users/schneems/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schneems/subscriptions","organizations_url":"https://api.github.com/users/schneems/orgs","repos_url":"https://api.github.com/users/schneems/repos","events_url":"https://api.github.com/users/schneems/events{/privacy}","received_events_url":"https://api.github.com/users/schneems/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-03-04T16:27:10Z","updated_at":"2016-03-04T17:48:49Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24059","html_url":"https://github.com/rails/rails/pull/24059","diff_url":"https://github.com/rails/rails/pull/24059.diff","patch_url":"https://github.com/rails/rails/pull/24059.patch"},"body":"If a user send as nil a parameter that is from nested attributes, it raises an exception that indifferent_access is not defined in nil class.\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24055","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24055/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24055/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24055/events","html_url":"https://github.com/rails/rails/issues/24055","id":138495508,"number":24055,"title":"Inconsistent results with #or in ActiveRecord::Relation with respect to documentation","user":{"login":"abhishekjain16","id":1992113,"avatar_url":"https://avatars.githubusercontent.com/u/1992113?v=3","gravatar_id":"","url":"https://api.github.com/users/abhishekjain16","html_url":"https://github.com/abhishekjain16","followers_url":"https://api.github.com/users/abhishekjain16/followers","following_url":"https://api.github.com/users/abhishekjain16/following{/other_user}","gists_url":"https://api.github.com/users/abhishekjain16/gists{/gist_id}","starred_url":"https://api.github.com/users/abhishekjain16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhishekjain16/subscriptions","organizations_url":"https://api.github.com/users/abhishekjain16/orgs","repos_url":"https://api.github.com/users/abhishekjain16/repos","events_url":"https://api.github.com/users/abhishekjain16/events{/privacy}","received_events_url":"https://api.github.com/users/abhishekjain16/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/With%20reproduction%20steps","name":"With reproduction steps","color":"009800"}],"state":"open","locked":false,"assignee":{"login":"sgrif","id":1529387,"avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=3","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","site_admin":false},"milestone":null,"comments":6,"created_at":"2016-03-04T14:59:02Z","updated_at":"2016-03-07T14:31:06Z","closed_at":null,"body":"According to documentation:\r\nhttps://github.com/rails/rails/blob/c577657f6de64b743b12a21108dc9cc5cfc35098/activerecord/lib/active_record/relation/query_methods.rb#L650\r\n\r\nIn order to use #or Neither relation may have a #limit, #offset, or #distinct set.\r\n\r\nBut, I could use all of the above like:\r\n```\r\n>> Post.where(id: 1).distinct.or(Post.where(id: 2).distinct)\r\n=> SELECT DISTINCT \"posts\".* FROM \"posts\" WHERE (\"posts\".\"id\" = ? OR \"posts\".\"id\" = ?)  [[\"id\", 1], [\"id\", 2]]\r\n```\r\nOR \r\n\r\n```\r\n>> Post.where(id: 1).limit(1).or(Post.where(id: 2).limit(1))\r\n=> SELECT  \"posts\".* FROM \"posts\" WHERE (\"posts\".\"id\" = ? OR \"posts\".\"id\" = ?) LIMIT ?  [[\"id\", 1], [\"id\", 2], [\"LIMIT\", 1]]\r\n```\r\n\r\nNot sure if this is intended behaviour to support #limit, #offset, or #distinct.\r\n\r\nIf yes, then we need to improve the documentation about above use case.\r\nIf no, then should it be considered as bug?\r\n\r\nI would be happy to look into it and send PR for either case.\r\nBut, wanted to confirm first for the intended behaviour.\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24054","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24054/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24054/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24054/events","html_url":"https://github.com/rails/rails/pull/24054","id":138482435,"number":24054,"title":"Extract `default_primary_key?` to refactor `column_spec_for_primary_key`","user":{"login":"kamipo","id":12642,"avatar_url":"https://avatars.githubusercontent.com/u/12642?v=3","gravatar_id":"","url":"https://api.github.com/users/kamipo","html_url":"https://github.com/kamipo","followers_url":"https://api.github.com/users/kamipo/followers","following_url":"https://api.github.com/users/kamipo/following{/other_user}","gists_url":"https://api.github.com/users/kamipo/gists{/gist_id}","starred_url":"https://api.github.com/users/kamipo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamipo/subscriptions","organizations_url":"https://api.github.com/users/kamipo/orgs","repos_url":"https://api.github.com/users/kamipo/repos","events_url":"https://api.github.com/users/kamipo/events{/privacy}","received_events_url":"https://api.github.com/users/kamipo/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"}],"state":"open","locked":false,"assignee":{"login":"pixeltrix","id":6321,"avatar_url":"https://avatars.githubusercontent.com/u/6321?v=3","gravatar_id":"","url":"https://api.github.com/users/pixeltrix","html_url":"https://github.com/pixeltrix","followers_url":"https://api.github.com/users/pixeltrix/followers","following_url":"https://api.github.com/users/pixeltrix/following{/other_user}","gists_url":"https://api.github.com/users/pixeltrix/gists{/gist_id}","starred_url":"https://api.github.com/users/pixeltrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pixeltrix/subscriptions","organizations_url":"https://api.github.com/users/pixeltrix/orgs","repos_url":"https://api.github.com/users/pixeltrix/repos","events_url":"https://api.github.com/users/pixeltrix/events{/privacy}","received_events_url":"https://api.github.com/users/pixeltrix/received_events","type":"User","site_admin":false},"milestone":null,"comments":1,"created_at":"2016-03-04T13:57:29Z","updated_at":"2016-03-04T13:59:42Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24054","html_url":"https://github.com/rails/rails/pull/24054","diff_url":"https://github.com/rails/rails/pull/24054.diff","patch_url":"https://github.com/rails/rails/pull/24054.patch"},"body":"And tests more strictly."},{"url":"https://api.github.com/repos/rails/rails/issues/24041","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24041/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24041/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24041/events","html_url":"https://github.com/rails/rails/issues/24041","id":138392896,"number":24041,"title":"PG::ConnectionBad: PQconsumeInput() : SELECT.....","user":{"login":"mwangm","id":1531455,"avatar_url":"https://avatars.githubusercontent.com/u/1531455?v=3","gravatar_id":"","url":"https://api.github.com/users/mwangm","html_url":"https://github.com/mwangm","followers_url":"https://api.github.com/users/mwangm/followers","following_url":"https://api.github.com/users/mwangm/following{/other_user}","gists_url":"https://api.github.com/users/mwangm/gists{/gist_id}","starred_url":"https://api.github.com/users/mwangm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mwangm/subscriptions","organizations_url":"https://api.github.com/users/mwangm/orgs","repos_url":"https://api.github.com/users/mwangm/repos","events_url":"https://api.github.com/users/mwangm/events{/privacy}","received_events_url":"https://api.github.com/users/mwangm/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/PostgreSQL","name":"PostgreSQL","color":"fbca04"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":1,"created_at":"2016-03-04T06:39:53Z","updated_at":"2016-03-04T13:45:25Z","closed_at":null,"body":"Use Active Record to access postgreSQL DB in our app,  Then we get a error in prod is like this \r\n   \r\n    PG::ConnectionBad: PQconsumeInput() : SELECT...\r\n    PG::ConnectionBad: PQsocket() can't get socket descriptor: SELECT...\r\n    PG::ConnectionBad: PQsocket() can't get socket descriptor: SELECT...\r\n    \r\n The reason it happend beacuse the db connection got stopped or killed by database for some reason(maybe network problem). But the active record connection poll will not repair this connection and keep it in the pool. That's bad.\r\n \r\n### Steps to reproduce\r\n  \r\n  1. connect your app to postgreSQL DB, loop to query something from db table.  \r\n  2. run a sql in db to kill the connection, then you got the error     \r\n\r\n### Expected behavior\r\n  the connection could be repaired \r\n### Actual behavior\r\n   the broken connection stay there,  the app keep get the error\r\n     `PG::ConnectionBad: PQsocket() can't get socket descriptor: SELECT...`\r\n\r\n### System configuration\r\n\r\n#### Rails version:\r\n N/A\r\n\r\n#### Ruby version:\r\n 2.1.5 "},{"url":"https://api.github.com/repos/rails/rails/issues/24040","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24040/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24040/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24040/events","html_url":"https://github.com/rails/rails/pull/24040","id":138363164,"number":24040,"title":"Action Cable payload parsing cleanup","user":{"login":"maclover7","id":3020626,"avatar_url":"https://avatars.githubusercontent.com/u/3020626?v=3","gravatar_id":"","url":"https://api.github.com/users/maclover7","html_url":"https://github.com/maclover7","followers_url":"https://api.github.com/users/maclover7/followers","following_url":"https://api.github.com/users/maclover7/following{/other_user}","gists_url":"https://api.github.com/users/maclover7/gists{/gist_id}","starred_url":"https://api.github.com/users/maclover7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maclover7/subscriptions","organizations_url":"https://api.github.com/users/maclover7/orgs","repos_url":"https://api.github.com/users/maclover7/repos","events_url":"https://api.github.com/users/maclover7/events{/privacy}","received_events_url":"https://api.github.com/users/maclover7/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actioncable","name":"actioncable","color":"bfdadc"}],"state":"open","locked":false,"assignee":{"login":"jeremy","id":199,"avatar_url":"https://avatars.githubusercontent.com/u/199?v=3","gravatar_id":"","url":"https://api.github.com/users/jeremy","html_url":"https://github.com/jeremy","followers_url":"https://api.github.com/users/jeremy/followers","following_url":"https://api.github.com/users/jeremy/following{/other_user}","gists_url":"https://api.github.com/users/jeremy/gists{/gist_id}","starred_url":"https://api.github.com/users/jeremy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeremy/subscriptions","organizations_url":"https://api.github.com/users/jeremy/orgs","repos_url":"https://api.github.com/users/jeremy/repos","events_url":"https://api.github.com/users/jeremy/events{/privacy}","received_events_url":"https://api.github.com/users/jeremy/received_events","type":"User","site_admin":false},"milestone":{"url":"https://api.github.com/repos/rails/rails/milestones/47","html_url":"https://github.com/rails/rails/milestones/5.0.0","labels_url":"https://api.github.com/repos/rails/rails/milestones/47/labels","id":1467326,"number":47,"title":"5.0.0","description":"","creator":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"open_issues":16,"closed_issues":393,"state":"open","created_at":"2015-12-18T21:17:59Z","updated_at":"2016-03-07T08:14:21Z","due_on":null,"closed_at":null},"comments":3,"created_at":"2016-03-04T03:10:07Z","updated_at":"2016-03-04T21:50:50Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24040","html_url":"https://github.com/rails/rails/pull/24040","diff_url":"https://github.com/rails/rails/pull/24040.diff","patch_url":"https://github.com/rails/rails/pull/24040.patch"},"body":"This centralizes all parsing and processing done on Action Cable\r\npayloads, within `ActionCable::Connection::Subscriptions`. Previously,\r\nthe parsing and processing was spread throughout the file, but now\r\neverything is centralized in one main `normalize_data` method.\r\n\r\nFollow-up to #23649."},{"url":"https://api.github.com/repos/rails/rails/issues/24037","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24037/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24037/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24037/events","html_url":"https://github.com/rails/rails/pull/24037","id":138326549,"number":24037,"title":"Are you missing that template or did you omit it on purpose?","user":{"login":"jeremy","id":199,"avatar_url":"https://avatars.githubusercontent.com/u/199?v=3","gravatar_id":"","url":"https://api.github.com/users/jeremy","html_url":"https://github.com/jeremy","followers_url":"https://api.github.com/users/jeremy/followers","following_url":"https://api.github.com/users/jeremy/following{/other_user}","gists_url":"https://api.github.com/users/jeremy/gists{/gist_id}","starred_url":"https://api.github.com/users/jeremy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeremy/subscriptions","organizations_url":"https://api.github.com/users/jeremy/orgs","repos_url":"https://api.github.com/users/jeremy/repos","events_url":"https://api.github.com/users/jeremy/events{/privacy}","received_events_url":"https://api.github.com/users/jeremy/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actionpack","name":"actionpack","color":"FFF700"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":1,"created_at":"2016-03-03T23:16:24Z","updated_at":"2016-03-04T03:07:40Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24037","html_url":"https://github.com/rails/rails/pull/24037","diff_url":"https://github.com/rails/rails/pull/24037.diff","patch_url":"https://github.com/rails/rails/pull/24037.patch"},"body":"Narrows the \"are you in a browser, viewing the page?\" check to exclude\r\nnon-GET requests. Allows content-less APIs to use implicit responses\r\nwithout having to set a fake request format.\r\n\r\nThis will need further attention. If you forget to redirect from a POST\r\nto a GET, you'll get a 204 No Content response that browsers will\r\ntypically treat as do nothing. It'll seem like the form just didn't\r\nwork and knowing where to start debugging is non-obvious.\r\n\r\nOn the flip side, redirecting from POST and others is the default, done\r\neverywhere, so it's less likely to be removed or otherwise missed.\r\n\r\nAlternatives are to do more explicit browser sniffing.\r\n\r\nRef #23827."},{"url":"https://api.github.com/repos/rails/rails/issues/24032","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24032/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24032/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24032/events","html_url":"https://github.com/rails/rails/issues/24032","id":138254238,"number":24032,"title":"Duplicate insert on autosave for specific HABTM-has_one combo","user":{"login":"nbekirov","id":705812,"avatar_url":"https://avatars.githubusercontent.com/u/705812?v=3","gravatar_id":"","url":"https://api.github.com/users/nbekirov","html_url":"https://github.com/nbekirov","followers_url":"https://api.github.com/users/nbekirov/followers","following_url":"https://api.github.com/users/nbekirov/following{/other_user}","gists_url":"https://api.github.com/users/nbekirov/gists{/gist_id}","starred_url":"https://api.github.com/users/nbekirov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nbekirov/subscriptions","organizations_url":"https://api.github.com/users/nbekirov/orgs","repos_url":"https://api.github.com/users/nbekirov/repos","events_url":"https://api.github.com/users/nbekirov/events{/privacy}","received_events_url":"https://api.github.com/users/nbekirov/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1"},{"url":"https://api.github.com/repos/rails/rails/labels/With%20reproduction%20steps","name":"With reproduction steps","color":"009800"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":1,"created_at":"2016-03-03T18:05:58Z","updated_at":"2016-03-05T05:59:36Z","closed_at":null,"body":"### Steps to reproduce\r\n\r\n```ruby\r\nclass Organisation < ActiveRecord::Base\r\n  has_one :user\r\nend\r\n\r\nclass User < ActiveRecord::Base\r\n  has_and_belongs_to_many :roles\r\n  belongs_to :organisation\r\nend\r\n\r\nclass Role < ActiveRecord::Base\r\n  has_and_belongs_to_many :users\r\nend\r\n\r\nuser = User.new\r\nuser.organisation = Organisation.new\r\nuser.roles << Role.new\r\nuser.save!\r\n```\r\n\r\n\r\nHere is my [Active Record Executable Test Case](https://gist.github.com/nbekirov/01c34d2b99ed5bcf9154)\r\n\r\nThis issue is related to [Rolify: Duplicate Roles #228](https://github.com/RolifyCommunity/rolify/issues/228)\r\n\r\nSome observations:\r\n  - If I change the order of `has_and_belongs_to_many` and `belongs_to` in `User` there is no issue\r\n  - If I add `autosave: false` to `has_and_belongs_to_many` in `User` there is no issue\r\n\r\nHere is an issue I've found that seems related but I don't think is quite the same: [has_and_belongs_to_many autosaves duplicate records](https://github.com/rails/rails/issues/3639)\r\n\r\n### Expected behavior\r\nOne `User` with one `Organisation` and one `Role` saved\r\n\r\n```sql\r\nINSERT INTO \"organisations\" DEFAULT VALUES\r\nINSERT INTO \"users\" (\"organisation_id\") VALUES (?)  [[\"organisation_id\", 1]]\r\nINSERT INTO \"roles\" DEFAULT VALUES\r\nINSERT INTO \"roles_users\" (\"user_id\", \"role_id\") VALUES (?, ?)  [[\"user_id\", 1], [\"role_id\", 1]]\r\n```\r\n\r\n### Actual behavior\r\nOne `User` with one `Organisation` and **two** `Role`-s saved\r\n```sql\r\nINSERT INTO \"organisations\" DEFAULT VALUES\r\nINSERT INTO \"users\" (\"organisation_id\") VALUES (?)  [[\"organisation_id\", 1]]\r\nINSERT INTO \"roles\" DEFAULT VALUES\r\nINSERT INTO \"roles_users\" (\"user_id\", \"role_id\") VALUES (?, ?)  [[\"user_id\", 1], [\"role_id\", 1]]\r\nINSERT INTO \"roles_users\" (\"user_id\", \"role_id\") VALUES (?, ?)  [[\"user_id\", 1], [\"role_id\", 1]]\r\n```\r\n\r\n### System configuration\r\n**Rails version**:\r\nN/A\r\n\r\n**Ruby version**:\r\n```bash\r\n$ ruby -v\r\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux-gnu]\r\n```"},{"url":"https://api.github.com/repos/rails/rails/issues/24031","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24031/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24031/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24031/events","html_url":"https://github.com/rails/rails/pull/24031","id":138211305,"number":24031,"title":"Do not destructively mutate passed options hash in route definitions","user":{"login":"samphilipd","id":4147639,"avatar_url":"https://avatars.githubusercontent.com/u/4147639?v=3","gravatar_id":"","url":"https://api.github.com/users/samphilipd","html_url":"https://github.com/samphilipd","followers_url":"https://api.github.com/users/samphilipd/followers","following_url":"https://api.github.com/users/samphilipd/following{/other_user}","gists_url":"https://api.github.com/users/samphilipd/gists{/gist_id}","starred_url":"https://api.github.com/users/samphilipd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samphilipd/subscriptions","organizations_url":"https://api.github.com/users/samphilipd/orgs","repos_url":"https://api.github.com/users/samphilipd/repos","events_url":"https://api.github.com/users/samphilipd/events{/privacy}","received_events_url":"https://api.github.com/users/samphilipd/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actionpack","name":"actionpack","color":"FFF700"}],"state":"open","locked":false,"assignee":{"login":"kaspth","id":350807,"avatar_url":"https://avatars.githubusercontent.com/u/350807?v=3","gravatar_id":"","url":"https://api.github.com/users/kaspth","html_url":"https://github.com/kaspth","followers_url":"https://api.github.com/users/kaspth/followers","following_url":"https://api.github.com/users/kaspth/following{/other_user}","gists_url":"https://api.github.com/users/kaspth/gists{/gist_id}","starred_url":"https://api.github.com/users/kaspth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaspth/subscriptions","organizations_url":"https://api.github.com/users/kaspth/orgs","repos_url":"https://api.github.com/users/kaspth/repos","events_url":"https://api.github.com/users/kaspth/events{/privacy}","received_events_url":"https://api.github.com/users/kaspth/received_events","type":"User","site_admin":false},"milestone":null,"comments":3,"created_at":"2016-03-03T15:32:15Z","updated_at":"2016-03-03T18:36:57Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24031","html_url":"https://github.com/rails/rails/pull/24031","diff_url":"https://github.com/rails/rails/pull/24031.diff","patch_url":"https://github.com/rails/rails/pull/24031.patch"},"body":"Fixes #24030\r\n\r\nAn example scope might be specified as such:\r\n\r\n```ruby\r\nHTML = { constraints: { format: :html } }.freeze\r\nscope HTML do\r\n  get 'x'\r\nend\r\n```\r\n\r\nThis currently raises an error because the mapper attempts to\r\ndestructively modify the passed options hash. This is dangerous because\r\nthis options hash might even be shared with other scopes.\r\n\r\nWe should instead always instantiate a new object instead of modifying\r\nthe passed options."},{"url":"https://api.github.com/repos/rails/rails/issues/24030","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24030/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24030/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24030/events","html_url":"https://github.com/rails/rails/issues/24030","id":138210960,"number":24030,"title":"Frozen hashes cannot be passed as route options","user":{"login":"samphilipd","id":4147639,"avatar_url":"https://avatars.githubusercontent.com/u/4147639?v=3","gravatar_id":"","url":"https://api.github.com/users/samphilipd","html_url":"https://github.com/samphilipd","followers_url":"https://api.github.com/users/samphilipd/followers","following_url":"https://api.github.com/users/samphilipd/following{/other_user}","gists_url":"https://api.github.com/users/samphilipd/gists{/gist_id}","starred_url":"https://api.github.com/users/samphilipd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samphilipd/subscriptions","organizations_url":"https://api.github.com/users/samphilipd/orgs","repos_url":"https://api.github.com/users/samphilipd/repos","events_url":"https://api.github.com/users/samphilipd/events{/privacy}","received_events_url":"https://api.github.com/users/samphilipd/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actionpack","name":"actionpack","color":"FFF700"},{"url":"https://api.github.com/repos/rails/rails/labels/attached%20PR","name":"attached PR","color":"006b75"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":0,"created_at":"2016-03-03T15:30:51Z","updated_at":"2016-03-03T18:37:43Z","closed_at":null,"body":"### Steps to reproduce\r\n\r\nAdd to routes something like this:\r\n\r\n```ruby\r\n    HTML = { constraints: { format: :html } }.freeze\r\n    scope HTML do\r\n      get 'x'\r\n    end\r\n ```\r\n\r\n### Expected behavior\r\nIt should pass the options as expected.\r\n\r\n### Actual behavior\r\nRaises 'cannot modify frozen hash'. We should not be destructively modifying options, what if the same object is supplied to multiple scopes?\r\n\r\nStacktrace:\r\n\r\n```\r\n/Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-4.1.7/lib/active_support/core_ext/hash/reverse_merge.rb:19:in `merge!': can't modify frozen Hash (RuntimeError)\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-4.1.7/lib/active_support/core_ext/hash/reverse_merge.rb:19:in `reverse_merge!'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/actionpack-4.1.7/lib/action_dispatch/routing/mapper.rb:743:in `scope'\r\n\tfrom /Users/sam/code/factual/front/apps/www/config/routes.rb:236:in `block in <top (required)>'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/actionpack-4.1.7/lib/action_dispatch/routing/route_set.rb:337:in `instance_exec'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/actionpack-4.1.7/lib/action_dispatch/routing/route_set.rb:337:in `eval_block'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/actionpack-4.1.7/lib/action_dispatch/routing/route_set.rb:315:in `draw'\r\n\tfrom /Users/sam/code/factual/front/apps/www/config/routes.rb:3:in `<top (required)>'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-4.1.7/lib/active_support/dependencies.rb:241:in `load'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-4.1.7/lib/active_support/dependencies.rb:241:in `block in load'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-4.1.7/lib/active_support/dependencies.rb:232:in `load_dependency'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-4.1.7/lib/active_support/dependencies.rb:241:in `load'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/application/routes_reloader.rb:40:in `each'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/application/routes_reloader.rb:40:in `load_paths'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/application/routes_reloader.rb:16:in `reload!'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/application/routes_reloader.rb:26:in `block in updater'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-4.1.7/lib/active_support/file_update_checker.rb:75:in `call'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/activesupport-4.1.7/lib/active_support/file_update_checker.rb:75:in `execute'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/application/routes_reloader.rb:27:in `updater'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/application/finisher.rb:71:in `block in <module:Finisher>'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/initializable.rb:30:in `instance_exec'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/initializable.rb:30:in `run'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/initializable.rb:55:in `block in run_initializers'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/2.1.0/tsort.rb:226:in `block in tsort_each'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/2.1.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/2.1.0/tsort.rb:427:in `each_strongly_connected_component_from'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/2.1.0/tsort.rb:347:in `block in each_strongly_connected_component'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/2.1.0/tsort.rb:345:in `each'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/2.1.0/tsort.rb:345:in `call'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/2.1.0/tsort.rb:345:in `each_strongly_connected_component'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/2.1.0/tsort.rb:224:in `tsort_each'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/2.1.0/tsort.rb:205:in `tsort_each'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/initializable.rb:54:in `run_initializers'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/application.rb:300:in `initialize!'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/railtie.rb:194:in `public_send'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/railties-4.1.7/lib/rails/railtie.rb:194:in `method_missing'\r\n\tfrom /Users/sam/code/factual/front/apps/www/config/environment.rb:6:in `<top (required)>'\r\n\tfrom /Users/sam/code/factual/front/apps/www/spec/rails_helper.rb:2:in `require'\r\n\tfrom /Users/sam/code/factual/front/apps/www/spec/rails_helper.rb:2:in `<top (required)>'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/configuration.rb:1295:in `require'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/configuration.rb:1295:in `block in requires='\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/configuration.rb:1295:in `each'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/configuration.rb:1295:in `requires='\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/configuration_options.rb:109:in `block in process_options_into'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/configuration_options.rb:108:in `each'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/configuration_options.rb:108:in `process_options_into'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/configuration_options.rb:21:in `configure'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/runner.rb:105:in `setup'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/runner.rb:92:in `run'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/runner.rb:78:in `run'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/lib/rspec/core/runner.rb:45:in `invoke'\r\n\tfrom /Users/sam/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/rspec-core-3.4.3/exe/rspec:4:in `<main>'\r\n```\r\n\r\n### System configuration\r\n4.1.7 (but also applies to current master)\r\n\r\n**Ruby version**:\r\n2.1.5"},{"url":"https://api.github.com/repos/rails/rails/issues/24029","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24029/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24029/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24029/events","html_url":"https://github.com/rails/rails/pull/24029","id":138202733,"number":24029,"title":"Dont call each when calling body on response to fix #23964","user":{"login":"rthbound","id":708692,"avatar_url":"https://avatars.githubusercontent.com/u/708692?v=3","gravatar_id":"","url":"https://api.github.com/users/rthbound","html_url":"https://github.com/rthbound","followers_url":"https://api.github.com/users/rthbound/followers","following_url":"https://api.github.com/users/rthbound/following{/other_user}","gists_url":"https://api.github.com/users/rthbound/gists{/gist_id}","starred_url":"https://api.github.com/users/rthbound/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rthbound/subscriptions","organizations_url":"https://api.github.com/users/rthbound/orgs","repos_url":"https://api.github.com/users/rthbound/repos","events_url":"https://api.github.com/users/rthbound/events{/privacy}","received_events_url":"https://api.github.com/users/rthbound/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actionpack","name":"actionpack","color":"FFF700"}],"state":"open","locked":false,"assignee":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"milestone":{"url":"https://api.github.com/repos/rails/rails/milestones/47","html_url":"https://github.com/rails/rails/milestones/5.0.0","labels_url":"https://api.github.com/repos/rails/rails/milestones/47/labels","id":1467326,"number":47,"title":"5.0.0","description":"","creator":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"open_issues":16,"closed_issues":393,"state":"open","created_at":"2015-12-18T21:17:59Z","updated_at":"2016-03-07T08:14:21Z","due_on":null,"closed_at":null},"comments":1,"created_at":"2016-03-03T15:01:01Z","updated_at":"2016-03-04T16:50:12Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24029","html_url":"https://github.com/rails/rails/pull/24029","diff_url":"https://github.com/rails/rails/pull/24029.diff","patch_url":"https://github.com/rails/rails/pull/24029.patch"},"body":"### Summary\r\n\r\nAn application might need to read response.body before actually sending the response. Currently, `response.body` would utilize the #each method, which should only be used when sending (or rather, only #each should send, so `response.body` shouldn't use #each). This adds a private `#each_without_send` method for `response.body` to use.\r\n\r\nFixes #23964 \r\n\r\n### Updated Description\r\n\r\nThis pull tackles the issue assuming the need for keeping `ActionDispatch::Response#body` around for use in applications' controllers or in tests. Since calling `#body` from these places should not actually send the response, we should avoid using `#each` (a method that is part of the rack interface and is used in sending the response).\r\n\r\nThe changes here aim to achieve the following:\r\n\r\n1. Implement a version of `#each` that doesn't send.\r\n2. Make sure `response.body` calls this non-sending each instead of `#each`.\r\n3. Make sure response objects in tests behave like actual sent responses (`#sent?` should return true for responses that are observed in tests)"},{"url":"https://api.github.com/repos/rails/rails/issues/24028","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24028/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24028/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24028/events","html_url":"https://github.com/rails/rails/issues/24028","id":138199473,"number":24028,"title":"Loading Interlock conflicts with explicit thread use","user":{"login":"matthewd","id":1034,"avatar_url":"https://avatars.githubusercontent.com/u/1034?v=3","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activesupport","name":"activesupport","color":"FC9300"},{"url":"https://api.github.com/repos/rails/rails/labels/release%20blocker","name":"release blocker","color":"e11d21"}],"state":"open","locked":false,"assignee":{"login":"matthewd","id":1034,"avatar_url":"https://avatars.githubusercontent.com/u/1034?v=3","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","site_admin":false},"milestone":{"url":"https://api.github.com/repos/rails/rails/milestones/47","html_url":"https://github.com/rails/rails/milestones/5.0.0","labels_url":"https://api.github.com/repos/rails/rails/milestones/47/labels","id":1467326,"number":47,"title":"5.0.0","description":"","creator":{"login":"rafaelfranca","id":47848,"avatar_url":"https://avatars.githubusercontent.com/u/47848?v=3","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","site_admin":false},"open_issues":16,"closed_issues":393,"state":"open","created_at":"2015-12-18T21:17:59Z","updated_at":"2016-03-07T08:14:21Z","due_on":null,"closed_at":null},"comments":3,"created_at":"2016-03-03T14:48:57Z","updated_at":"2016-03-04T19:57:47Z","closed_at":null,"body":"Existing code that spawns a new thread and then waits on its result, where that thread triggers an autoload, can cause a deadlock in the Interlock.\r\n\r\nWe have no programmatic evidence that such a pattern is safe. The fact it's survived in the real world, however, suggests the cases we care about are in fact safe-in-practice. Generally, they're safe because the original thread is waiting for the entire time the second thread is running -- so the \"only one thread can autoload\" rule is still actually enforced.\r\n\r\n---\r\n\r\nThere are two variants of this situation.\r\n\r\nThe first is where the spawned thread is just doing arbitrary work. We can detect this when it tries to autoload and notices it doesn't hold the share lock. As it's detectable, we can raise a descriptive error, and/or offer a `:trust_me` concurrency mode which allows it (again, on the basis that while we can't prove it's safe, if the code already existed [pre-interlock, it was just as unsafe.. we just weren't noticing] and was not causing weird bugs, there's a reasonable chance it's okay).\r\n\r\nThe second is where the spawned thread enters the executor. Specifically, this can come up if the spawned thread is processing requests through the application's rack middleware stack -- Capybara does this. In this case, because the callee is properly using the new APIs, I can see no way to detect that something's amiss.\r\n\r\n---\r\n\r\nIn both cases, it's really the calling thread that's at fault: an autoload-capable thread cannot wait on another autoload-capable thread without yielding the lock. The capability to do so is new, but the problem was already there."},{"url":"https://api.github.com/repos/rails/rails/issues/24022","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24022/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24022/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24022/events","html_url":"https://github.com/rails/rails/pull/24022","id":138135349,"number":24022,"title":"Update contributing guide such that contributors start from their fork","user":{"login":"aaronang","id":7579804,"avatar_url":"https://avatars.githubusercontent.com/u/7579804?v=3","gravatar_id":"","url":"https://api.github.com/users/aaronang","html_url":"https://github.com/aaronang","followers_url":"https://api.github.com/users/aaronang/followers","following_url":"https://api.github.com/users/aaronang/following{/other_user}","gists_url":"https://api.github.com/users/aaronang/gists{/gist_id}","starred_url":"https://api.github.com/users/aaronang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aaronang/subscriptions","organizations_url":"https://api.github.com/users/aaronang/orgs","repos_url":"https://api.github.com/users/aaronang/repos","events_url":"https://api.github.com/users/aaronang/events{/privacy}","received_events_url":"https://api.github.com/users/aaronang/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1"}],"state":"open","locked":false,"assignee":{"login":"sgrif","id":1529387,"avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=3","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","site_admin":false},"milestone":null,"comments":3,"created_at":"2016-03-03T10:11:16Z","updated_at":"2016-03-03T13:38:13Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24022","html_url":"https://github.com/rails/rails/pull/24022","diff_url":"https://github.com/rails/rails/pull/24022.diff","patch_url":"https://github.com/rails/rails/pull/24022.patch"},"body":"### Summary\r\n\r\nIn the current guide, newcomers will have two remotes set, namely `origin` and  `mine`, which is a bit *confusing* in my opinion. Therefore, in this patch, I updated the contributing guide such that a Rails contributors end up with two remote repositories set, namely `origin` and `upstream` with the benefit that `origin` and `upstream` are in accordance with the [GitHub guide](https://help.github.com/articles/syncing-a-fork/).\r\n\r\n### Other Information\r\n\r\nAccording to the guide, you first clone the original Rails repository, which results in the origin being set to `git@github.com:rails/rails.git`.\r\nThen, you are suggested to fork and set it as remote:\r\n\r\n```bash\r\n$ git remote add mine git@github.com:<your user name>/rails.git\r\n```\r\n\r\nDoing this results in two remotes:\r\n\r\n```bash\r\nvagrant@rails-dev-box:/vagrant/rails$ git remote -v\r\nmine    git@github.com:<username>/rails.git (fetch)\r\nmine    git@github.com:<username>/rails.git (push)\r\norigin  git@github.com:rails/rails.git (fetch)\r\norigin  git@github.com:rails/rails.git (push)\r\n```\r\n\r\nI am looking forward to hearing your feedback :grimacing: "},{"url":"https://api.github.com/repos/rails/rails/issues/24013","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24013/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24013/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24013/events","html_url":"https://github.com/rails/rails/issues/24013","id":138007577,"number":24013,"title":"Routing constraint with hash and instance of class that responds to #matches?","user":{"login":"jcoyne","id":92044,"avatar_url":"https://avatars.githubusercontent.com/u/92044?v=3","gravatar_id":"","url":"https://api.github.com/users/jcoyne","html_url":"https://github.com/jcoyne","followers_url":"https://api.github.com/users/jcoyne/followers","following_url":"https://api.github.com/users/jcoyne/following{/other_user}","gists_url":"https://api.github.com/users/jcoyne/gists{/gist_id}","starred_url":"https://api.github.com/users/jcoyne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcoyne/subscriptions","organizations_url":"https://api.github.com/users/jcoyne/orgs","repos_url":"https://api.github.com/users/jcoyne/repos","events_url":"https://api.github.com/users/jcoyne/events{/privacy}","received_events_url":"https://api.github.com/users/jcoyne/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/actionpack","name":"actionpack","color":"FFF700"},{"url":"https://api.github.com/repos/rails/rails/labels/routing","name":"routing","color":"e102d8"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":2,"created_at":"2016-03-02T22:10:44Z","updated_at":"2016-03-04T20:48:37Z","closed_at":null,"body":"### Steps to reproduce\r\n\r\nIn order to match a character like `/` or `:` in a route I can add a constraint block like so:\r\n`get 'lib/:id' => 'catalog#show', constraints: { id: /ark:\\/\\d{5}\\/f\\w{7,9}/ }`\r\n\r\nThis will match \r\n`'/lib/ark:/99999/fk41234567' => { controller: 'catalog', action: 'show', id: 'ark:/99999/fk41234567' }`\r\n\r\nNow, I'd like to add an additional constraint of an object that responds to `matches?`\r\n\r\n```ruby\r\nclass RouteMatcher\r\n  def matches?(request)\r\n     true\r\n  end\r\nend\r\n\r\nget 'lib/:id' => 'catalog#show', constraints: RouteMatcher.new\r\n```\r\nHowever, now I've lost the ability to capture `/` in my id parameter.  \r\n\r\n### Expected behavior\r\nIt would be great if you could have multiple constraints like this:\r\n```\r\nget 'lib/:id' => 'catalog#show', constraints: [\r\n                   RouteMatcher.new,\r\n                   { id: /ark:\\/\\d{5}\\/f\\w{7,9}/ }\r\n                 ]\r\n```\r\n### Actual behavior\r\nTell us what happens instead\r\n`ArgumentError: Invalid constraint`\r\n```\r\n/Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:225:in `verify_callable_constraint': Invalid constraint: [#<AudioRoutingConcern:0x007fcf698a3f28>, {:id=>/ark:\\/\\d{5}\\/f\\w{7,9}/}] must respond to :call or :matches? (ArgumentError)\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:324:in `blocks'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:108:in `initialize'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:78:in `new'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:78:in `build'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:1560:in `add_route'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:1537:in `decomposed_match'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:1518:in `block in match'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:1508:in `each'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:1508:in `match'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:690:in `map_method'\r\n        from /Users/justin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/actionpack-4.2.5.1/lib/action_dispatch/routing/mapper.rb:651:in `get'\r\n        from /Users/justin/workspace/alexandria-v2/config/routes.rb:45:in `block in <top (required)>'\r\n```\r\n### System configuration\r\n**Rails version**: 4.5.1\r\n\r\n**Ruby version**: 2.3.0\r\n"},{"url":"https://api.github.com/repos/rails/rails/issues/24007","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/24007/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/24007/comments","events_url":"https://api.github.com/repos/rails/rails/issues/24007/events","html_url":"https://github.com/rails/rails/pull/24007","id":137910774,"number":24007,"title":"respect `pride` option","user":{"login":"y-yagi","id":987638,"avatar_url":"https://avatars.githubusercontent.com/u/987638?v=3","gravatar_id":"","url":"https://api.github.com/users/y-yagi","html_url":"https://github.com/y-yagi","followers_url":"https://api.github.com/users/y-yagi/followers","following_url":"https://api.github.com/users/y-yagi/following{/other_user}","gists_url":"https://api.github.com/users/y-yagi/gists{/gist_id}","starred_url":"https://api.github.com/users/y-yagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/y-yagi/subscriptions","organizations_url":"https://api.github.com/users/y-yagi/orgs","repos_url":"https://api.github.com/users/y-yagi/repos","events_url":"https://api.github.com/users/y-yagi/events{/privacy}","received_events_url":"https://api.github.com/users/y-yagi/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/rails/rails/labels/activesupport","name":"activesupport","color":"FC9300"}],"state":"open","locked":false,"assignee":{"login":"senny","id":5402,"avatar_url":"https://avatars.githubusercontent.com/u/5402?v=3","gravatar_id":"","url":"https://api.github.com/users/senny","html_url":"https://github.com/senny","followers_url":"https://api.github.com/users/senny/followers","following_url":"https://api.github.com/users/senny/following{/other_user}","gists_url":"https://api.github.com/users/senny/gists{/gist_id}","starred_url":"https://api.github.com/users/senny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/senny/subscriptions","organizations_url":"https://api.github.com/users/senny/orgs","repos_url":"https://api.github.com/users/senny/repos","events_url":"https://api.github.com/users/senny/events{/privacy}","received_events_url":"https://api.github.com/users/senny/received_events","type":"User","site_admin":false},"milestone":null,"comments":5,"created_at":"2016-03-02T15:47:59Z","updated_at":"2016-03-03T19:46:43Z","closed_at":null,"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/24007","html_url":"https://github.com/rails/rails/pull/24007","diff_url":"https://github.com/rails/rails/pull/24007.diff","patch_url":"https://github.com/rails/rails/pull/24007.patch"},"body":"Because it removes the reporters after initialization process of pride extension, to use the pride extension, need to call initialization process of pride extension again.\r\n\r\nFixes #23994.\r\n"}]

